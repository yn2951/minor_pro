<div class="index-topics-wrapper">
  <div class="container">
    <%= @topics.each do |topic| %>
      <div class="row topic-unit">
        <div class="pull-left col-md-2 col-md-offset-6">
          <%= image_tag topic.image.url, class: 'img-responsive' %>
        </div>
        <div class="pull-right col-md-4">
          <div>
            <%= link_to detail_path(id: topic.id) do %>
                <%= topic.title %>
            <% end %>
          </div>
          <div>
            by
            <% if !logged_in? || logged_in? && topic.user.id != current_user.id %>
              <%= link_to topic.user.name, users_path(id: topic.user.id) %>
            <% else %>
              Myself
            <% end %>
          </div>
          <div>
            いいね！ <%= topic.good_users.count %>　|　マイナー！ <%= topic.minor_users.count %>
          </div>
          <% if logged_in? && topic.user.id != current_user.id %>
            <div>
              <span id="<%= topic.id %>">
                <%= render partial: "topics/good", locals: {topic: topic} %>
              </span>
              <% if !topic.minor_users.include?(current_user) %>
                <%= link_to minors_path(topic_id: topic.id), method: :post do %>
                  <i class="far fa-gem"></i>
                <% end %>
              <% else %>
                <%= link_to minors_path(topic_id: topic.id), method: :delete do %>
                  <i class="fas fa-gem"></i>
                <% end %>
              <% end %>
              <% if !topic.bookmark_users.include?(current_user) %>
                <%= link_to bookmarks_path(topic_id: topic.id), method: :post do %>
                  <i class="far fa-bookmark"></i>
                <% end %>
              <% else %>
                <%= link_to bookmarks_path(topic_id: topic.id), method: :delete do %>
                  <i class="fas fa-bookmark"></i>
                <% end %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
</div>
