<div class="detail-wrapper">
  <div class="container">
    <div class="row">
      <div class="main-contents">
        <div class="col-md-6 col-md-offset-3 info">
          by
          <% if !logged_in? || logged_in? && @topic.user != current_user %>
          　<%= link_to @topic.user.name, users_path(id: @topic.user) %>
          <% else %>
          　Myself
          <% end %>
          　|　いいね！ <span id="good_count_<%= @topic.id %>"><%= @topic.counter.good_count %></span>　|　マイナー！ <span id="minor_count_<%= @topic.id %>"><%= @topic.counter.minor_count %></span>
          <% if @topic.user == current_user %>
          　|　<%= link_to '編集する', edit_topic_path(id: @topic.id), class: 'btn btn-link' %>
          <% elsif logged_in? %>
          　|　
              <span id="good_<%= @topic.id %>">
                <%= render partial: "topics/good", locals: {topic: @topic} %>
              </span>
              <span id="minor_<%= @topic.id %>">
                <%= render partial: "topics/minor", locals: {topic: @topic} %>
              </span>
              <span id="bookmark_<%= @topic.id %>">
                <%= render partial: "topics/bookmark", locals: {topic: @topic} %>
              </span>
          <% end %>
        </div>
        <div class="col-md-8 col-md-offset-2 title">
          <%= @topic.title %>
        </div>
        <div class="col-md-6 col-md-offset-3">
          <%= image_tag @topic.image.url, class: 'img-responsive image' %>
        </div>
        <div class="col-md-8 col-md-offset-2 description">
          <%= @topic.description %>
        </div>
      </div>
      <div class="col-md-6 col-md-offset-3 text-center comment-count">
        <h4>コメント<%= @topic.counter.comment_count %>件</h4>
      </div>
      <% if logged_in? %>
        <div class="col-md-8 col-md-offset-2">
          <%= form_for @comment, url: comments_path do |f| %>
            <%= hidden_field_tag :topic_id, @topic.id %>
            <%= f.hidden_field :topic_id, :value => @topic.id %>
            <div class="input-group">
              <%= f.text_field :text, class: 'form-control', id: "comment-form" %>
              <span class="input-group-btn">
                <%= f.submit 'コメントする', class: 'btn btn-default' %>
              </span>
            </div>
          <% end %>
        </div>
      <% end %>
      <div id="comments" class="col-md-8 col-md-offset-2 pages">
        <%= render partial: "topics/comment" %>
        <%= paginate @comments %>
      </div>
    </div>
  </div>
</div>
